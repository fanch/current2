# Description: An interpreter for the PostScript language
# URL: http://www.ghostscript.com/awki
# Packager: pierre at nutyx dot org
# Depends on: glib atk libpng libjpeg-turbo libtiff jasper lcms2 gnutls cups 

name=ghostscript
version=9.19
release=1

source=( https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs919/$name-$version.tar.gz
         https://sourceforge.net/projects/gs-fonts/files/latest/download
         http://ftp.gnu.org/pub/gnu/ghostscript/gnu-gs-fonts-other-6.0.tar.gz )

unset MAKEFLAGS

build() {
cd $name-$version
rm -rf freetype lcms2 jpeg libpng
./configure --prefix=/usr \
	--enable-dynamic \
	--with-system-libtiff
make
make so
make DESTDIR=$PKG install soinstall

mkdir -p $PKG/usr/include/ghostscript
mkdir -p $PKG/usr/share/doc/$name-$version

install -v -m644 base/*.h $PKG/usr/include/ghostscript
ln -v -s ghostscript $PKG/usr/include/ps

ln -sv ../ghostscript/$version/doc \
$PKG/usr/share/doc/$name-$version

cp -r $SRC/fonts $PKG/usr/share/ghostscript
}
